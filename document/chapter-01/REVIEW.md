# Chapter 01 - Review 

***

## 리팩토링을 하는 이유? 

이해하기 어려운 코드를 좋은 코드로 바꾸기 위해서

- 클린 코드와 같은 개념이라고 생각한다. Readability + 수정하기 쉬운 코드가 좋은 코드라고 생각한다. 

## 리팩토링을 해야하는 시점은 언제인가? 

요구사항에 맞춰서 코드를 수정해야 하는 일이 생겼는데 현재 확장 가능한 구조가 아니라고 느낄 때 한다.  

세세하게 나누면 다음과 같을 듯. 

- 여러가지 작업을 하고 있는 하나의 거대한 함수나 클래스에서 기능 변경을 넣을 때. 

- 이해가 되지 않는 구조로 클래스들이 협업하고 있을 때. 

- 미래에 요구사항으로 들어올 수 있는 부분이 확장 가능하다고 느껴지지 않을 때. 

- 코드가 읽기 어려울 때. 

- 코드의 중복이 발생할 것 같을 때 

## 리팩토링의 플로우는 어떻게 되는가? 

리팩토링의 단계를 잘게 나눈다. 

각 단계별로 리팩토링을 한 후 컴파일-테스트-커밋 단계로 실행한다. 

테스트가 실패하면 이전 커밋 단계로 돌아가서 하나씩 다시 해본다. 

리팩토링에서는 기능이 여전히 잘 작동하고 있다는 뜻인 테스트가 굉장히 중요하다.

다양한 테스트 시나리오를 만드는게 중요하고, 리팩토링 하는 중에 테스트 코드가 변경이 되면 안된다. (즉 너무 많은 구조 변경을 해서 테스트 코드 조차 바꿔야하는 상황이 오면 안된다.)  

## 리팩토링의 기법들과 적용성에 대해서 정리

### 함수 쪼개기 

하나의 거대 함수를 기능 별로 이름을 줘가면서 짧은 함수로 만드는 걸 말한다.
  
이러한 기법들로 인해서 코드 구조를 보다 명확하게 할 수 있다. 

주로 함수를 추출하는 기법으로 사용하는데 여러 개의 로컬 변수를 사용한다면 읽기만 하는 변수와 변경을 적용하는 변수로 구별을 해야한다. 

변경이 있는 변수가 하나라면 바로 함수 추출이 가능하지만 여러개라면 같은 객체 안으로 묶는 작업이 필요하다. 

추출한 새 함수에서 보다 명확하게 이름을 변경할 수 있는 부분이 있는지 확인해보자. 

기본적으로 반환하는 값은 result 라는 이름이 좀 더 명확하다. 

### 임시 변수 질의 함수로 추출하기 

선언된 변수가 단지 계산되는 용도로 로직이 구성되어 있다면 이는 변수를 질의 함수로 바꿀 수 있다. 

이를 통해 변수를 인라인으로 표시하도록 바꿀 수 있어서 지역 변수를 선언하지 않아도 된다. 

지역 변수는 함수를 추출하기 어렵게 만들기 때문에 이런식으로 제거하는게 좋다. (물론 지역변수를 사용해야 하는 경우가 있을 것이다. 이 부분에 대해서는 좀 더 찾아봐야 할 듯) 

### 반복문 쪼개기 

반복문에 있는 특정 부분을 함수로 빼내고 싶을 때 사용하는 방법이다. 

하나의 반복문을 여러 반복문으로 나눠서 성능이 떨어질 수 있다는 점이 있지만 그렇게 차이가 날 정도로 떨어지지도 않을 것이고 리팩토링을 해놓으면 후에 성능을 개선할 여지가 더 많을 것이기 떄문에 신경쓰지 않아도 된다. 

### 문장 슬라이스 

문장의 위치를 적절한 곳으로 옮기는 것이다. 

유사한 작업의 문장을 가까운 거리로 맞춤으로써 좀 더 코드는 명확해 질 수 있다. 

### 단계 쪼개기 

코드를 모듈화 하는 방법이다. 

모듈화를 통해 기능을 확실히 독립적으로 나눔으로써 코드의 중복을 줄일 수 있다. 

여기서는 계산과 렌더링 이라는 부분을 확실히 나눴다. 그 전에는 렌더링 안에 계산의 로직이 있어서 렌더링 기능이 확장되면 계산의 로직도 같이 중복되는 문제가 생겼다. 

(추가로 모듈화는 클래스-객체 단위로 나누는게 훨씬 독립적인듯, 메소드로 모듈화는 ㄴㄴ)

### 다형성을 통해 코드 재구성하기 

조건부 로직을 여러개 추가하면서 난잡하게 만드는 것보다 (코드 수 증가로 인한 난잡함과 여러개의 조건문의 반복) 다형성을 이용하는게 훨씬 나을 수 있다.









 